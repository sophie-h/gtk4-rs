<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lists - GUI development with Rust and GTK 4</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="prerequisites.html"><strong aria-hidden="true">1.</strong> Prerequisites</a></li><li class="chapter-item expanded "><a href="hello_world.html"><strong aria-hidden="true">2.</strong> Hello World!</a></li><li class="chapter-item expanded "><a href="widgets.html"><strong aria-hidden="true">3.</strong> Widgets</a></li><li class="chapter-item expanded "><a href="gobject_concepts.html"><strong aria-hidden="true">4.</strong> GObject Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="gobject_memory_management.html"><strong aria-hidden="true">4.1.</strong> Memory Management</a></li><li class="chapter-item expanded "><a href="gobject_subclassing.html"><strong aria-hidden="true">4.2.</strong> Subclassing</a></li><li class="chapter-item expanded "><a href="gobject_values.html"><strong aria-hidden="true">4.3.</strong> Generic Values</a></li><li class="chapter-item expanded "><a href="gobject_properties.html"><strong aria-hidden="true">4.4.</strong> Properties</a></li><li class="chapter-item expanded "><a href="gobject_signals.html"><strong aria-hidden="true">4.5.</strong> Signals</a></li></ol></li><li class="chapter-item expanded "><a href="main_event_loop.html"><strong aria-hidden="true">5.</strong> The Main Event Loop</a></li><li class="chapter-item expanded "><a href="settings.html"><strong aria-hidden="true">6.</strong> Settings</a></li><li class="chapter-item expanded "><a href="saving_window_state.html"><strong aria-hidden="true">7.</strong> Saving Window State</a></li><li class="chapter-item expanded "><a href="lists.html" class="active"><strong aria-hidden="true">8.</strong> Lists</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Building a Simple To-Do App</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Interface Builder</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> GtkBuilder</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> Templates</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Resources</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> Actions</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> Shortcuts</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.</strong> Media Support</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">14.1.</strong> Images</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.2.</strong> Videos</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> App with Persistent Image Selection</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Accessibility</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> Internationalization</div></li><li class="chapter-item expanded affix "><li class="part-title">Useful Libraries</li><li class="chapter-item expanded "><div><strong aria-hidden="true">18.</strong> GtkSourceView</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">19.</strong> GStreamer</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">20.</strong> Libadwaita</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">21.</strong> Webkit2Gtk</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">22.</strong> Zbus and Ashpd</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">GUI development with Rust and GTK 4</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/gtk-rs/gtk4-rs/tree/master/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lists"><a class="header" href="#lists">Lists</a></h1>
<p>Sometimes you want to display a list of elements in a certain arrangement.
<a href="../docs/gtk4/struct.ListBox.html"><code>ListBox</code></a> and <a href="../docs/gtk4/struct.FlowBox.html"><code>FlowBox</code></a> are two container widgets which allow you to do this.
<code>ListBox</code> describes a vertical list and <code>FlowBox</code> describes a grid.</p>
<p>Let us explore this concept by adding labels to a <code>ListBox</code>.
Each label will display an integer starting from 0 and ranging up to 100.</p>
<p><span class="filename">Filename: listings/lists/1/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{Application, ApplicationWindow, Label, ListBox, PolicyType, ScrolledWindow};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span>    // Create a `ListBox` and add labels with integers from 0 to 100
    let list_box = ListBox::new();
    for number in 0..=100 {
        let label = Label::new(Some(&amp;number.to_string()));
        list_box.append(&amp;label);
    }
<span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_box)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>We cannot display so many widgets at once.
Therefore, we add <code>ListBox</code> to a <a href="../docs/gtk/struct.ScrolledWindow.html"><code>ScrolledWindow</code></a>.
Now we can scroll through our elements.</p>
<p><span class="filename">Filename: listings/lists/1/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{Application, ApplicationWindow, Label, ListBox, PolicyType, ScrolledWindow};
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    // Create a `ListBox` and add labels with integers from 0 to 100
</span><span class="boring">    let list_box = ListBox::new();
</span><span class="boring">    for number in 0..=100 {
</span><span class="boring">        let label = Label::new(Some(&amp;number.to_string()));
</span><span class="boring">        list_box.append(&amp;label);
</span><span class="boring">    }
</span><span class="boring">
</span>    let scrolled_window = ScrolledWindow::builder()
        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
        .min_content_width(360)
        .child(&amp;list_box)
        .build();
    window.set_child(Some(&amp;scrolled_window));
    window.show();
<span class="boring">}
</span></code></pre></pre>
<div style="text-align:center"><img src="img/lists_list_box.png"/></div>
<p>That was easy enough.
However, we currently create one widget per element.
Since each widget takes up a bit of resources, many of them can lead to slow and unresponsive user interfaces.
Depending on the widget type even thousands of elements might not be a problem.
But how could we possibly deal with the infinite amount of posts in a social media timeline?</p>
<p>We use scalable lists instead!</p>
<ul>
<li>The <strong>model</strong> holds our data, filters it and describes its order.</li>
<li>The <strong>list item factory</strong> defines how the data transforms into widgets.</li>
<li>The <strong>view</strong> specifies how the widgets are then arranged.</li>
</ul>
<p>What makes this concept scalable is that GTK only has to create slightly more widgets than we can currently look at.
As we scroll through our elements, the widgets which become invisible will be reused.
The following figure demonstrates how this works in practice.</p>
<div style="text-align:center"><img src="img/scalable_lists_concept.png"/></div>
<p>100 000 elements is something <code>ListBox</code> will struggle with, so let us use this to demonstrate scalable lists.</p>
<p>We start by defining and filling up our model.
The model is an instance of <a href="https://gtk-rs.org/docs/gio/struct.ListStore.html"><code>gio::ListStore</code></a>.
The main limitation here is that <code>gio::ListStore</code> only accepts GObjects.
What we would need is a GObject which holds an integer and exposes it as property.
To get that we just have to adapt the <code>CustomButton</code> we created in the subclassing <a href="gobject_subclassing.html">chapter</a>.
We only need to let it inherit from GObject instead of <code>Button</code> and let the <code>new</code> method accept an integer as parameter.</p>
<p><span class="filename">Filename: listings/lists/2/integer_object/mod.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod imp;
</span><span class="boring">
</span><span class="boring">use glib::Object;
</span><span class="boring">use gtk::glib;
</span><span class="boring">
</span>glib::wrapper! {
    pub struct IntegerObject(ObjectSubclass&lt;imp::IntegerObject&gt;);
}

impl IntegerObject {
    pub fn new(number: i32) -&gt; Self {
        Object::new(&amp;[(&quot;number&quot;, &amp;number)]).unwrap()
    }
}
<span class="boring">
</span><span class="boring">// Please ignore this line
</span><span class="boring">// It is only there to make mdbook happy
</span><span class="boring">fn main() {}
</span></code></pre></pre>
<p>We now fill the model with integers from 0 to 100 000.
Please note that the models only takes care of the data.
Neither <code>Label</code> nor any other widget is mentioned here.</p>
<p><span class="filename">Filename: listings/lists/2/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span>    let model = gio::ListStore::new(IntegerObject::static_type());
    for number in 0..=100_000 {
        let integer_object = IntegerObject::new(number);
        model.append(&amp;integer_object);
    }
<span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    factory.connect_bind(move |_, list_item| {
</span><span class="boring">        // Get `IntegerObject` from `ListItem`
</span><span class="boring">        let integer_object = list_item
</span><span class="boring">            .item()
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `i32` from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `Label` from `ListItem`
</span><span class="boring">        let label = list_item
</span><span class="boring">            .child()
</span><span class="boring">            .expect(&quot;The child has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;Label&gt;()
</span><span class="boring">            .expect(&quot;The child has to be a `Label`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Set &quot;label&quot; to &quot;number&quot;
</span><span class="boring">        label.set_label(&amp;number.to_string());
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>The <code>ListItemFactory</code> takes care of the widgets as well as their relationship to the model.
Here, we use the <a href="../docs/gtk4/struct.SignalListItemFactory.html"><code>SignalListItemFactory</code></a> which emits a signal for every relevant step in the life of a <a href="../docs/gtk4/struct.ListItem.html"><code>ListItem</code></a>.
The &quot;setup&quot; signal will be emitted when new widgets have to be created.
We connect to it to create a <code>Label</code> for every requested widget.</p>
<p><span class="filename">Filename: listings/lists/2/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span>    let factory = SignalListItemFactory::new();
    factory.connect_setup(move |_, list_item| {
        let label = Label::new(None);
        list_item.set_child(Some(&amp;label));
    });
<span class="boring">
</span><span class="boring">    factory.connect_bind(move |_, list_item| {
</span><span class="boring">        // Get `IntegerObject` from `ListItem`
</span><span class="boring">        let integer_object = list_item
</span><span class="boring">            .item()
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `i32` from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `Label` from `ListItem`
</span><span class="boring">        let label = list_item
</span><span class="boring">            .child()
</span><span class="boring">            .expect(&quot;The child has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;Label&gt;()
</span><span class="boring">            .expect(&quot;The child has to be a `Label`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Set &quot;label&quot; to &quot;number&quot;
</span><span class="boring">        label.set_label(&amp;number.to_string());
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>In the &quot;bind&quot; step we bind the data in our model to the individual list items.</p>
<p><span class="filename">Filename: listings/lists/2/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span>    factory.connect_bind(move |_, list_item| {
        // Get `IntegerObject` from `ListItem`
        let integer_object = list_item
            .item()
            .expect(&quot;The item has to exist.&quot;)
            .downcast::&lt;IntegerObject&gt;()
            .expect(&quot;The item has to be an `IntegerObject`.&quot;);

        // Get `i32` from `IntegerObject`
        let number = integer_object
            .property(&quot;number&quot;)
            .expect(&quot;The property needs to exist and be readable.&quot;)
            .get::&lt;i32&gt;()
            .expect(&quot;The property needs to be of type `i32`.&quot;);

        // Get `Label` from `ListItem`
        let label = list_item
            .child()
            .expect(&quot;The child has to exist.&quot;)
            .downcast::&lt;Label&gt;()
            .expect(&quot;The child has to be a `Label`.&quot;);

        // Set &quot;label&quot; to &quot;number&quot;
        label.set_label(&amp;number.to_string());
    });
<span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>We only want single items to be selectable, so we choose <a href="../docs/gtk4/struct.SingleSelection.html"><code>SingleSelection</code></a>.
The other options would have been <a href="../docs/gtk4/struct.MultiSelection.html"><code>MultiSelection</code></a> or <a href="../docs/gtk4/struct.NoSelection.html"><code>NoSelection</code></a>.
Then we pass the model and the factory to the <a href="../docs/gtk4/struct.ListView.html"><code>ListView</code></a>.</p>
<p><span class="filename">Filename: listings/lists/2/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    factory.connect_bind(move |_, list_item| {
</span><span class="boring">        // Get `IntegerObject` from `ListItem`
</span><span class="boring">        let integer_object = list_item
</span><span class="boring">            .item()
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `i32` from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `Label` from `ListItem`
</span><span class="boring">        let label = list_item
</span><span class="boring">            .child()
</span><span class="boring">            .expect(&quot;The child has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;Label&gt;()
</span><span class="boring">            .expect(&quot;The child has to be a `Label`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Set &quot;label&quot; to &quot;number&quot;
</span><span class="boring">        label.set_label(&amp;number.to_string());
</span><span class="boring">    });
</span><span class="boring">
</span>    let selection_model = SingleSelection::new(Some(&amp;model));
    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
<span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>Every <code>ListView</code> has to be a direct child of a <code>ScrolledWindow</code>, so we are adding it to one.</p>
<p><span class="filename">Filename: listings/lists/2/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    factory.connect_bind(move |_, list_item| {
</span><span class="boring">        // Get `IntegerObject` from `ListItem`
</span><span class="boring">        let integer_object = list_item
</span><span class="boring">            .item()
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `i32` from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `Label` from `ListItem`
</span><span class="boring">        let label = list_item
</span><span class="boring">            .child()
</span><span class="boring">            .expect(&quot;The child has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;Label&gt;()
</span><span class="boring">            .expect(&quot;The child has to be a `Label`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Set &quot;label&quot; to &quot;number&quot;
</span><span class="boring">        label.set_label(&amp;number.to_string());
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span>    let scrolled_window = ScrolledWindow::builder()
        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
        .min_content_width(360)
        .child(&amp;list_view)
        .build();
    window.set_child(Some(&amp;scrolled_window));
    window.show();
<span class="boring">}
</span></code></pre></pre>
<p>We can now easily scroll through our long list of integers.</p>
<div style="text-align:center"><img src="img/lists_list_view_1.png"/></div>
<p>Let us see what else we can do.
We might want to increase the number every time we activate its row.
For that we first add the method <code>increase_number</code> to our <code>IntegerObject</code>.</p>
<p><span class="filename">Filename: listings/lists/3/integer_object/mod.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span><span class="boring">mod imp;
</span><span class="boring">
</span><span class="boring">use glib::Object;
</span><span class="boring">use gtk::glib;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">
</span><span class="boring">glib::wrapper! {
</span><span class="boring">    pub struct IntegerObject(ObjectSubclass&lt;imp::IntegerObject&gt;);
</span><span class="boring">}
</span><span class="boring">
</span>impl IntegerObject {
    pub fn new(number: i32) -&gt; Self {
        Object::new(&amp;[(&quot;number&quot;, &amp;number)]).unwrap()
    }

    pub fn increase_number(self) {
        let old_number = self
            .property(&quot;number&quot;)
            .expect(&quot;The property needs to exist and be readable.&quot;)
            .get::&lt;i32&gt;()
            .expect(&quot;The property needs to be of type `i32`.&quot;);

        self.set_property(&quot;number&quot;, old_number + 1).unwrap();
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>In order to interact with our <code>ListView</code>, we connect to its &quot;activate&quot; signal.</p>
<p><span class="filename">Filename: listings/lists/3/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use glib::BindingFlags;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{gio, glib};
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    factory.connect_bind(move |_, list_item| {
</span><span class="boring">        // Get `IntegerObject` from `ListItem`
</span><span class="boring">        let integer_object = list_item
</span><span class="boring">            .item()
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get `Label` from `ListItem`
</span><span class="boring">        let label = list_item
</span><span class="boring">            .child()
</span><span class="boring">            .expect(&quot;The child has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;Label&gt;()
</span><span class="boring">            .expect(&quot;The child has to be a `Label`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Bind &quot;label&quot; to &quot;number&quot;
</span><span class="boring">        integer_object
</span><span class="boring">            .bind_property(&quot;number&quot;, &amp;label, &quot;label&quot;)
</span><span class="boring">            .flags(BindingFlags::SYNC_CREATE)
</span><span class="boring">            .build();
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span>    list_view.connect_activate(move |list_view, position| {
        // Get `IntegerObject` from model
        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
        let integer_object = model
            .item(position)
            .expect(&quot;The item has to exist.&quot;)
            .downcast::&lt;IntegerObject&gt;()
            .expect(&quot;The item has to be an `IntegerObject`.&quot;);

        // Increase &quot;number&quot; of `IntegerObject`
        integer_object.increase_number();
    });
<span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>Now every time we activate an element, for example by double-clicking on it,
the corresponding &quot;number&quot; property of the <code>IntegerObject</code> in the model will be increased by 1.
However, just because the <code>IntegerObject</code> has been modified the corresponding <code>Label</code> does not immediately change.
One naive approach would be to bind the properties in the &quot;bind&quot; step of the <code>SignalListItemFactory</code>.</p>
<p><span class="filename">Filename: listings/lists/3/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use glib::BindingFlags;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{gio, glib};
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, Label, ListView, PolicyType, ScrolledWindow,
</span><span class="boring">    SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span>    factory.connect_bind(move |_, list_item| {
        // Get `IntegerObject` from `ListItem`
        let integer_object = list_item
            .item()
            .expect(&quot;The item has to exist.&quot;)
            .downcast::&lt;IntegerObject&gt;()
            .expect(&quot;The item has to be an `IntegerObject`.&quot;);

        // Get `Label` from `ListItem`
        let label = list_item
            .child()
            .expect(&quot;The child has to exist.&quot;)
            .downcast::&lt;Label&gt;()
            .expect(&quot;The child has to be a `Label`.&quot;);

        // Bind &quot;label&quot; to &quot;number&quot;
        integer_object
            .bind_property(&quot;number&quot;, &amp;label, &quot;label&quot;)
            .flags(BindingFlags::SYNC_CREATE)
            .build();
    });
<span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    list_view.connect_activate(move |list_view, position| {
</span><span class="boring">        // Get `IntegerObject` from model
</span><span class="boring">        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
</span><span class="boring">        let integer_object = model
</span><span class="boring">            .item(position)
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Increase &quot;number&quot; of `IntegerObject`
</span><span class="boring">        integer_object.increase_number();
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>At first glance, that seems to work.
However, as you scroll around and activate a few list elements,
you will notice that sometimes multiple numbers change even though you only activated a single one.
This relates to how the view works internally.
Not every model item belongs to a single widget, but the widgets get recycled instead as you scroll through the view.
That also means that in our case, multiple numbers will be bound to the same widget.</p>
<p>Situations like these are so common that GTK offers an alternative to property binding: <a href="../docs/gtk4/struct.Expression.html">expressions</a>.
As a first step it allows us to remove the &quot;bind&quot; step.
Let us see how the &quot;setup&quot; step now works.</p>
<p><span class="filename">Filename: listings/lists/4/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, ConstantExpression, Label, ListView, PolicyType,
</span><span class="boring">    PropertyExpression, ScrolledWindow, SignalListItemFactory, SingleSelection,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span>    factory.connect_setup(move |_, list_item| {
        // Create label
        let label = Label::new(None);
        list_item.set_child(Some(&amp;label));

        // Create expression describing `list_item-&gt;item-&gt;number`
        let list_item_expression = ConstantExpression::new(list_item);
        let integer_object_expression = PropertyExpression::new(
            gtk::ListItem::static_type(),
            Some(&amp;list_item_expression),
            &quot;item&quot;,
        );
        let number_expression = PropertyExpression::new(
            IntegerObject::static_type(),
            Some(&amp;integer_object_expression),
            &quot;number&quot;,
        );

        // Bind &quot;number&quot; to &quot;label&quot;
        number_expression.bind(&amp;label, &quot;label&quot;, Some(&amp;label));
    });
<span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    list_view.connect_activate(move |list_view, position| {
</span><span class="boring">        // Get `IntegerObject` from model
</span><span class="boring">        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
</span><span class="boring">        let integer_object = model
</span><span class="boring">            .item(position)
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Increase &quot;number&quot; of `IntegerObject`
</span><span class="boring">        integer_object.increase_number();
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>An expression describes a reference to a value.
So when we create a <a href="../docs/gtk4/struct.ConstantExpression.html"><code>ConstantExpression</code></a> of <code>list_item</code>, we create a reference to a <code>ListItem</code>.
We then create a <a href="../docs/gtk4/struct.PropertyExpression.html"><code>PropertyExpression</code></a> to get a reference to the &quot;item&quot; property of <code>list_item</code>.
With another <code>PropertyExpression</code> we get a reference to the &quot;number&quot; property of the &quot;item&quot; property of <code>list_item</code>.
That already makes the first power of expressions obvious: It allows nested relationships.
Finally, we bind &quot;number&quot; to &quot;label&quot;.
In pseudo code that would be <code>label-&gt;label = list_item-&gt;item-&gt;number</code>.</p>
<p>It is worth noting that at the &quot;setup&quot; stage there is no way of knowing which list item belongs to which label, simply because this changes as we scroll through the list.
This is the power of expressions!
We do not have to define a fixed relationship, the object and properties might not even exist yet.
We just had to tell it to change the label whenever the number that belongs to it changes.
That way, we also do not face the problem that multiple labels are bound to the same number.
When we now activate a label, only the corresponding number visibly changes.</p>
<p>That is still not everything we can do.
We can, for example, filter our model to only allow even numbers.</p>
<p><span class="filename">Filename: listings/lists/5/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, ConstantExpression, CustomSorter, FilterChange, Label,
</span><span class="boring">    ListView, PolicyType, PropertyExpression, ScrolledWindow, SignalListItemFactory,
</span><span class="boring">    SingleSelection, SortListModel, SorterChange,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        // Create label
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">
</span><span class="boring">        // Create expression describing `list_item-&gt;item-&gt;number`
</span><span class="boring">        let list_item_expression = ConstantExpression::new(list_item);
</span><span class="boring">        let integer_object_expression = PropertyExpression::new(
</span><span class="boring">            gtk::ListItem::static_type(),
</span><span class="boring">            Some(&amp;list_item_expression),
</span><span class="boring">            &quot;item&quot;,
</span><span class="boring">        );
</span><span class="boring">        let number_expression = PropertyExpression::new(
</span><span class="boring">            IntegerObject::static_type(),
</span><span class="boring">            Some(&amp;integer_object_expression),
</span><span class="boring">            &quot;number&quot;,
</span><span class="boring">        );
</span><span class="boring">
</span><span class="boring">        // Bind &quot;number&quot; to &quot;label&quot;
</span><span class="boring">        number_expression.bind(&amp;label, &quot;label&quot;, Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span>    let filter = gtk::CustomFilter::new(move |obj| {
        // Get `IntegerObject` from `glib::Object`
        let integer_object = obj
            .downcast_ref::&lt;IntegerObject&gt;()
            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);

        // Get property &quot;number&quot; from `IntegerObject`
        let number = integer_object
            .property(&quot;number&quot;)
            .expect(&quot;The property needs to exist and be readable.&quot;)
            .get::&lt;i32&gt;()
            .expect(&quot;The property needs to be of type `i32`.&quot;);

        // Only allow even numbers
        number % 2 == 0
    });
    let filter_model = gtk::FilterListModel::new(Some(&amp;model), Some(&amp;filter));
<span class="boring">
</span><span class="boring">    let sorter = CustomSorter::new(move |obj1, obj2| {
</span><span class="boring">        // Get `IntegerObject` from `glib::Object`
</span><span class="boring">        let integer_object_1 = obj1
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">        let integer_object_2 = obj2
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get property &quot;number&quot; from `IntegerObject`
</span><span class="boring">        let number_1 = integer_object_1
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">        let number_2 = integer_object_2
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Reverse sorting order -&gt; large numbers come first
</span><span class="boring">        number_2.cmp(&amp;number_1).into()
</span><span class="boring">    });
</span><span class="boring">    let sort_model = SortListModel::new(Some(&amp;filter_model), Some(&amp;sorter));
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;sort_model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    list_view.connect_activate(move |list_view, position| {
</span><span class="boring">        // Get `IntegerObject` from model
</span><span class="boring">        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
</span><span class="boring">        let integer_object = model
</span><span class="boring">            .item(position)
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Increase &quot;number&quot; of `IntegerObject`
</span><span class="boring">        integer_object.increase_number();
</span><span class="boring">
</span><span class="boring">        // Notify that the filter and sorter has been changed
</span><span class="boring">        filter.changed(FilterChange::Different);
</span><span class="boring">        sorter.changed(SorterChange::Different);
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>Additionally, we can reverse the order of our model.</p>
<p><span class="filename">Filename: listings/lists/5/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, ConstantExpression, CustomSorter, FilterChange, Label,
</span><span class="boring">    ListView, PolicyType, PropertyExpression, ScrolledWindow, SignalListItemFactory,
</span><span class="boring">    SingleSelection, SortListModel, SorterChange,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        // Create label
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">
</span><span class="boring">        // Create expression describing `list_item-&gt;item-&gt;number`
</span><span class="boring">        let list_item_expression = ConstantExpression::new(list_item);
</span><span class="boring">        let integer_object_expression = PropertyExpression::new(
</span><span class="boring">            gtk::ListItem::static_type(),
</span><span class="boring">            Some(&amp;list_item_expression),
</span><span class="boring">            &quot;item&quot;,
</span><span class="boring">        );
</span><span class="boring">        let number_expression = PropertyExpression::new(
</span><span class="boring">            IntegerObject::static_type(),
</span><span class="boring">            Some(&amp;integer_object_expression),
</span><span class="boring">            &quot;number&quot;,
</span><span class="boring">        );
</span><span class="boring">
</span><span class="boring">        // Bind &quot;number&quot; to &quot;label&quot;
</span><span class="boring">        number_expression.bind(&amp;label, &quot;label&quot;, Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let filter = gtk::CustomFilter::new(move |obj| {
</span><span class="boring">        // Get `IntegerObject` from `glib::Object`
</span><span class="boring">        let integer_object = obj
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get property &quot;number&quot; from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Only allow even numbers
</span><span class="boring">        number % 2 == 0
</span><span class="boring">    });
</span><span class="boring">    let filter_model = gtk::FilterListModel::new(Some(&amp;model), Some(&amp;filter));
</span><span class="boring">
</span>    let sorter = CustomSorter::new(move |obj1, obj2| {
        // Get `IntegerObject` from `glib::Object`
        let integer_object_1 = obj1
            .downcast_ref::&lt;IntegerObject&gt;()
            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
        let integer_object_2 = obj2
            .downcast_ref::&lt;IntegerObject&gt;()
            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);

        // Get property &quot;number&quot; from `IntegerObject`
        let number_1 = integer_object_1
            .property(&quot;number&quot;)
            .expect(&quot;The property needs to exist and be readable.&quot;)
            .get::&lt;i32&gt;()
            .expect(&quot;The property needs to be of type `i32`.&quot;);
        let number_2 = integer_object_2
            .property(&quot;number&quot;)
            .expect(&quot;The property needs to exist and be readable.&quot;)
            .get::&lt;i32&gt;()
            .expect(&quot;The property needs to be of type `i32`.&quot;);

        // Reverse sorting order -&gt; large numbers come first
        number_2.cmp(&amp;number_1).into()
    });
    let sort_model = SortListModel::new(Some(&amp;filter_model), Some(&amp;sorter));
<span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;sort_model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span><span class="boring">    list_view.connect_activate(move |list_view, position| {
</span><span class="boring">        // Get `IntegerObject` from model
</span><span class="boring">        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
</span><span class="boring">        let integer_object = model
</span><span class="boring">            .item(position)
</span><span class="boring">            .expect(&quot;The item has to exist.&quot;)
</span><span class="boring">            .downcast::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The item has to be an `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Increase &quot;number&quot; of `IntegerObject`
</span><span class="boring">        integer_object.increase_number();
</span><span class="boring">
</span><span class="boring">        // Notify that the filter and sorter has been changed
</span><span class="boring">        filter.changed(FilterChange::Different);
</span><span class="boring">        sorter.changed(SorterChange::Different);
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>To ensure that our filter and sorter get updated when we modify the numbers, we call the <code>changed</code> method on them.</p>
<p><span class="filename">Filename: listings/lists/5/main.rs</span></p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">mod integer_object;
</span><span class="boring">
</span><span class="boring">use gtk::gio;
</span><span class="boring">use gtk::prelude::*;
</span><span class="boring">use gtk::{
</span><span class="boring">    Application, ApplicationWindow, ConstantExpression, CustomSorter, FilterChange, Label,
</span><span class="boring">    ListView, PolicyType, PropertyExpression, ScrolledWindow, SignalListItemFactory,
</span><span class="boring">    SingleSelection, SortListModel, SorterChange,
</span><span class="boring">};
</span><span class="boring">use integer_object::IntegerObject;
</span><span class="boring">
</span><span class="boring">fn main() {
</span><span class="boring">    // Create a new application
</span><span class="boring">    let app = Application::new(Some(&quot;org.gtk.example&quot;), Default::default());
</span><span class="boring">    app.connect_activate(build_ui);
</span><span class="boring">
</span><span class="boring">    // Run the application
</span><span class="boring">    app.run();
</span><span class="boring">}
</span><span class="boring">
</span><span class="boring">fn build_ui(application: &amp;Application) {
</span><span class="boring">    // Create a window
</span><span class="boring">    let window = ApplicationWindow::builder()
</span><span class="boring">        .application(application)
</span><span class="boring">        .title(&quot;My GTK App&quot;)
</span><span class="boring">        .default_width(600)
</span><span class="boring">        .default_height(300)
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    let model = gio::ListStore::new(IntegerObject::static_type());
</span><span class="boring">    for number in 0..=100_000 {
</span><span class="boring">        let integer_object = IntegerObject::new(number);
</span><span class="boring">        model.append(&amp;integer_object);
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    let factory = SignalListItemFactory::new();
</span><span class="boring">    factory.connect_setup(move |_, list_item| {
</span><span class="boring">        // Create label
</span><span class="boring">        let label = Label::new(None);
</span><span class="boring">        list_item.set_child(Some(&amp;label));
</span><span class="boring">
</span><span class="boring">        // Create expression describing `list_item-&gt;item-&gt;number`
</span><span class="boring">        let list_item_expression = ConstantExpression::new(list_item);
</span><span class="boring">        let integer_object_expression = PropertyExpression::new(
</span><span class="boring">            gtk::ListItem::static_type(),
</span><span class="boring">            Some(&amp;list_item_expression),
</span><span class="boring">            &quot;item&quot;,
</span><span class="boring">        );
</span><span class="boring">        let number_expression = PropertyExpression::new(
</span><span class="boring">            IntegerObject::static_type(),
</span><span class="boring">            Some(&amp;integer_object_expression),
</span><span class="boring">            &quot;number&quot;,
</span><span class="boring">        );
</span><span class="boring">
</span><span class="boring">        // Bind &quot;number&quot; to &quot;label&quot;
</span><span class="boring">        number_expression.bind(&amp;label, &quot;label&quot;, Some(&amp;label));
</span><span class="boring">    });
</span><span class="boring">
</span><span class="boring">    let filter = gtk::CustomFilter::new(move |obj| {
</span><span class="boring">        // Get `IntegerObject` from `glib::Object`
</span><span class="boring">        let integer_object = obj
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get property &quot;number&quot; from `IntegerObject`
</span><span class="boring">        let number = integer_object
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Only allow even numbers
</span><span class="boring">        number % 2 == 0
</span><span class="boring">    });
</span><span class="boring">    let filter_model = gtk::FilterListModel::new(Some(&amp;model), Some(&amp;filter));
</span><span class="boring">
</span><span class="boring">    let sorter = CustomSorter::new(move |obj1, obj2| {
</span><span class="boring">        // Get `IntegerObject` from `glib::Object`
</span><span class="boring">        let integer_object_1 = obj1
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">        let integer_object_2 = obj2
</span><span class="boring">            .downcast_ref::&lt;IntegerObject&gt;()
</span><span class="boring">            .expect(&quot;The object needs to be of type `IntegerObject`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Get property &quot;number&quot; from `IntegerObject`
</span><span class="boring">        let number_1 = integer_object_1
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">        let number_2 = integer_object_2
</span><span class="boring">            .property(&quot;number&quot;)
</span><span class="boring">            .expect(&quot;The property needs to exist and be readable.&quot;)
</span><span class="boring">            .get::&lt;i32&gt;()
</span><span class="boring">            .expect(&quot;The property needs to be of type `i32`.&quot;);
</span><span class="boring">
</span><span class="boring">        // Reverse sorting order -&gt; large numbers come first
</span><span class="boring">        number_2.cmp(&amp;number_1).into()
</span><span class="boring">    });
</span><span class="boring">    let sort_model = SortListModel::new(Some(&amp;filter_model), Some(&amp;sorter));
</span><span class="boring">
</span><span class="boring">    let selection_model = SingleSelection::new(Some(&amp;sort_model));
</span><span class="boring">    let list_view = ListView::new(Some(&amp;selection_model), Some(&amp;factory));
</span><span class="boring">
</span>    list_view.connect_activate(move |list_view, position| {
        // Get `IntegerObject` from model
        let model = list_view.model().expect(&quot;The model has to exist.&quot;);
        let integer_object = model
            .item(position)
            .expect(&quot;The item has to exist.&quot;)
            .downcast::&lt;IntegerObject&gt;()
            .expect(&quot;The item has to be an `IntegerObject`.&quot;);

        // Increase &quot;number&quot; of `IntegerObject`
        integer_object.increase_number();

        // Notify that the filter and sorter has been changed
        filter.changed(FilterChange::Different);
        sorter.changed(SorterChange::Different);
    });
<span class="boring">
</span><span class="boring">    let scrolled_window = ScrolledWindow::builder()
</span><span class="boring">        .hscrollbar_policy(PolicyType::Never) // Disable horizontal scrolling
</span><span class="boring">        .min_content_width(360)
</span><span class="boring">        .child(&amp;list_view)
</span><span class="boring">        .build();
</span><span class="boring">    window.set_child(Some(&amp;scrolled_window));
</span><span class="boring">    window.show();
</span><span class="boring">}
</span></code></pre></pre>
<p>After our changes, the application looks like this:</p>
<div style="text-align:center"><img src="img/lists_list_view_2.png"/></div>
<p>We now know how to display a list of data.
Small amount of elements can be handled by <code>ListBox</code> or <code>FlowBox</code>.
These widgets are easy to use and allow, if necessary, to be bound to a model such as <a href="http://gtk-rs.org/docs/gio/struct.ListStore.html"><code>gio::ListStore</code></a>.
Their data can then be modified, sorted and filtered more easily.
However, if we need the widgets to be scalable we still need to use <a href="../docs/gtk4/struct.ListView.html"><code>ListView</code></a>, <a href="../docs/gtk4/struct.ColumnView.html"><code>ColumnView</code></a> or <a href="../docs/gtk4/struct.GridView.html"><code>GridView</code></a> instead.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="saving_window_state.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="saving_window_state.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
